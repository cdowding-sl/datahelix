{
  "schemaVersion": "0.10",
  "fields": [
    {
      "name": "tradeId",
      "type": "integer",
      "nullable": false,
      "unique": true
    },
    {
      "name": "stock",
      "type": "string",
      "nullable": false
    },
    {
      "name": "side",
      "type": "string",
      "nullable": false
    },
    {
      "name": "tradePrice",
      "type": "decimal",
      "nullable": false
    },
    {
      "name": "volume",
      "type": "integer",
      "nullable": false
    },
    {
      "name": "tradeDatetime",
      "type": "datetime",
      "nullable": false
    },
    {
      "name": "tradeDate",
      "type": "datetime",
      "nullable": false
    },
    {
      "name": "settlementDate",
      "type": "datetime",
      "nullable": false
    }
  ],
  "rules": [
    {
      "rule": "tradeId",
      "constraints": [
        {
          "greaterThanOrEqualTo": {
            "field": "tradeId",
            "value": 10000
          }
        },
        {
          "lessThanOrEqualTo": {
            "field": "tradeId",
            "value": 99999
          }
        }
      ]
    },
    {
      "rule": "stock",
      "constraints": [
        {
          "inSet": {
            "field": "stock",
            "file": "examples/demo-trades/stockCodes.csv"
          }
        }
      ]
    },
    {
      "rule": "side",
      "constraints": [
        {
          "inSet": {
            "field": "side",
            "values": [
              "BUY",
              "SELL"
            ]
          }
        }
      ]
    },
    {
      "rule": "tradePrice",
      "constraints": [
        {
          "granularTo": {
            "field": "tradePrice",
            "value": 0.1
          }
        },
        {
          "condition": {
            "if": {
              "equalTo": {
                "field": "stock",
                "value": "LLOY"
              }
            },
            "then": {
              "allOf": [
                {
                  "greaterThan": {
                    "field": "tradePrice",
                    "value": 49.3
                  }
                },
                {
                  "lessThan": {
                    "field": "tradePrice",
                    "value": 50.0
                  }
                }
              ]
            }
          }
        },
        {
          "if": {
            "equalTo": {
              "field": "stock",
              "value": "BARC"
            }
          },
          "then": {
            "allOf": [
              {
                "greaterThan": {
                  "field": "tradePrice",
                  "value": 136.1
                }
              },
              {
                "lessThan": {
                  "field": "tradePrice",
                  "value": 137.0
                }
              }
            ]
          }
        },
        {
          "condition": {
            "if": {
              "equalTo": {
                "field": "stock",
                "value": "BP"
              }
            },
            "then": {
              "allOf": [
                {
                  "greaterThan": {
                    "field": "tradePrice",
                    "value": 490.0
                  }
                },
                {
                  "lessThan": {
                    "field": "tradePrice",
                    "value": 500.0
                  }
                }
              ]
            }
          }
        }
      ]
    },
    {
      "rule": "volume",
      "constraints": [
        {
          "greaterThanOrEqualTo": {
            "field": "volume",
            "value": 1
          }
        },
        {
          "lessThanOrEqualTo": {
            "field": "volume",
            "value": 20
          }
        }
      ]
    },
    {
      "rule": "tradeDatetime",
      "constraints": [
        {
          "granularTo": {
            "field": "tradeDatetime",
            "value": "millis"
          }
        },
        {
          "after": {
            "field": "tradeDatetime",
            "value": "2019-09-02T09:30:00.000"
          }
        },
        {
          "before": {
            "field": "tradeDatetime",
            "value": "2019-09-02T16:30:00.000"
          }
        }
      ]
    },
    {
      "rule": "tradeDate",
      "constraints": [
        {
          "granularTo": {
            "field": "tradeDate",
            "value": "days"
          }
        },
        {
          "equalTo": {
            "field": "tradeDate",
            "value": "2019-09-02T00:00:00.000"
          }
        }
      ]
    },
    {
      "rule": "settlementDate",
      "constraints": [
        {
          "equalTo": {
            "field": "settlementDate",
            "otherField": "tradeDate",
            "offset": 5,
            "offsetUnit": "working days"
          }
        }
      ]
    }
  ]
}